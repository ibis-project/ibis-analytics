# https://taskfile.dev
---
version: '3'

# version control variables
dotenv: ['.env']

tasks:

  # ingest data
  ingest-gh:
    cmds:
      - python src/ingest_gh.py
  ingest-pypi:
    cmds:
      - python src/ingest_pypi.py
  ingest:
    cmds:
      - task: ingest-gh
      - task: ingest-pypi

  # copy eda database to metrics database
  metrics:
    cmds:
      - cp eda.ddb metrics.ddb


  # cleanup
  clean-data:
    cmds:
      - cmd: rm -r data/pypi
        ignore_error: true
      - cmd: rm -r data/github
        ignore_error: true

  clean-dbs:
    cmds:
      - cmd: rm *.ddb*
        ignore_error: true
      

  # streamlit stuff
  app:
    cmds:
      - streamlit run app.py
  st:
    cmds:
      - cmd: app
  streamlit:
    cmds:
      - cmd: app

